(this["webpackJsonpsd-0x-project-frontend-online-store"]=this["webpackJsonpsd-0x-project-frontend-online-store"]||[]).push([[0],{24:function(t,e,a){t.exports=a(40)},29:function(t,e,a){},30:function(t,e,a){},40:function(t,e,a){"use strict";a.r(e);var n=a(0),r=a.n(n),i=a(20),c=a.n(i),o=(a(29),a(23)),u=a(5),s=a(6),l=a(9),d=a(8),p=a(7),h=(a(30),a(12)),m=a(1),y=a(21),f=a(10),b=a.n(f),v=a(13),g=function(t){Object(d.a)(a,t);var e=Object(p.a)(a);function a(){return Object(u.a)(this,a),e.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){var t=this.props,e=t.products,a=t.addState;return 0===e.length?"Nenhum produto foi encontrado":e.map((function(t){return r.a.createElement(r.a.Fragment,null,r.a.createElement(h.b,{to:{pathname:"/details/".concat(t.id),state:{product:t}},"data-testid":"product-detail-link"},r.a.createElement("div",{"data-testid":"product",key:t.title},r.a.createElement("p",null,t.title),r.a.createElement("img",{src:t.thumbnail,alt:t.title}),r.a.createElement("p",null,t.price))),r.a.createElement("button",{type:"button","data-testid":"product-add-to-cart",onClick:function(){return a(t)}},"Adicionar ao carrinho"))}))}}]),a}(r.a.Component);function E(){return j.apply(this,arguments)}function j(){return(j=Object(v.a)(b.a.mark((function t(){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",fetch("https://api.mercadolibre.com/sites/MLB/categories").then((function(t){return t.json()})));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function k(t,e){return O.apply(this,arguments)}function O(){return(O=Object(v.a)(b.a.mark((function t(e,a){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",fetch("https://api.mercadolibre.com/sites/MLB/search?category=".concat(e,"&q=").concat(a)).then((function(t){return t.json()})));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var C=function(t){Object(d.a)(a,t);var e=Object(p.a)(a);function a(){var t;return Object(u.a)(this,a),(t=e.call(this)).state={allCategories:[],inputQuery:"",category:"",response:[]},t.getTextAndCategory=t.getTextAndCategory.bind(Object(l.a)(t)),t.requestButton=t.requestButton.bind(Object(l.a)(t)),t.clearState=t.clearState.bind(Object(l.a)(t)),t}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.getCategories()}},{key:"getItemsFromCategoryAndQuery",value:function(){var t=Object(v.a)(b.a.mark((function t(e,a){var n;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,k(e,a);case 2:n=t.sent,this.setState({response:n.results});case 4:case"end":return t.stop()}}),t,this)})));return function(e,a){return t.apply(this,arguments)}}()},{key:"getCategories",value:function(){var t=Object(v.a)(b.a.mark((function t(){var e;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,E();case 2:e=t.sent,this.setState({allCategories:e});case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"getTextAndCategory",value:function(t){var e=this,a=t.target,n=a.value,r=a.name;this.setState(Object(y.a)({},r,n),(function(){"category"===r&&e.requestButton()}))}},{key:"requestButton",value:function(){var t=Object(v.a)(b.a.mark((function t(){var e,a,n;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.clearState(),e=this.state,a=e.inputQuery,n=e.category,this.getItemsFromCategoryAndQuery(n,a);case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"clearState",value:function(){this.setState({response:[]})}},{key:"render",value:function(){var t=this,e=this.state,a=e.allCategories,n=e.response,i=this.props.addState;return r.a.createElement("div",{className:"main-page"},r.a.createElement("div",{className:"categories"},r.a.createElement("aside",null,r.a.createElement("div",{className:"category-form"},a.map((function(e){return r.a.createElement("button",{type:"button",key:e.id,"data-testid":"category",name:"category",value:e.id,onClick:t.getTextAndCategory},e.name)}))))),r.a.createElement("div",null,r.a.createElement("form",{className:"search-bar"},r.a.createElement("label",{htmlFor:"queryInput","data-testid":"home-initial-message"},"Digite algum termo de pesquisa ou escolha uma categoria.",r.a.createElement("input",{type:"text",name:"inputQuery","data-testid":"query-input",id:"queryInput",onChange:this.getTextAndCategory}))),r.a.createElement("button",{type:"button",onClick:this.requestButton,"data-testid":"query-button"},"Pesquisa"),r.a.createElement(h.b,{to:"/carrinho","data-testid":"shopping-cart-button"},"Carrinho de compras \ud83d\uded2"),r.a.createElement(g,{products:n,addState:i})))}}]),a}(r.a.Component),S=function(t){Object(d.a)(a,t);var e=Object(p.a)(a);function a(){return Object(u.a)(this,a),e.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){var t=this.props,e=t.product,a=t.handleDelete,n=t.increaseQuantity,i=t.decreaseQuantity;return r.a.createElement("div",null,r.a.createElement("div",{key:e.title},r.a.createElement("p",{"data-testid":"shopping-cart-product-name"},e.title),r.a.createElement("button",{type:"button",onClick:function(){return a(e)}},"X"),r.a.createElement("button",{type:"button","data-testid":"product-increase-quantity",onClick:function(){return n(e)}},"+ MAIS"),r.a.createElement("button",{type:"button","data-testid":"product-decrease-quantity",onClick:function(){return i(e)}},"- MENOS"),r.a.createElement("img",{src:e.thumbnail,alt:e.title}),r.a.createElement("p",null,"Valor deste produto: R$",e.price),r.a.createElement("span",{"data-testid":"shopping-cart-product-quantity"},"Quandidade selecionada: ".concat(e.quantity))))}}]),a}(n.Component),Q=function(t){Object(d.a)(a,t);var e=Object(p.a)(a);function a(){var t;return Object(u.a)(this,a),(t=e.call(this)).state={shoppingCart:[]},t.handleDelete=t.handleDelete.bind(Object(l.a)(t)),t}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.filterFunction()}},{key:"handleDelete",value:function(t){var e=this.state.shoppingCart.filter((function(e){return e.id!==t.id}));this.setState({shoppingCart:e})}},{key:"filterFunction",value:function(){var t=this.props.cart.reduce((function(t,e){return t.includes(e)?t:t.concat(e)}),[]);this.setState({shoppingCart:t})}},{key:"render",value:function(){var t=this,e=this.props,a=e.cart,n=e.increaseQuantity,i=e.decreaseQuantity,c=this.state.shoppingCart,o=r.a.createElement("h3",{"data-testid":"shopping-cart-empty-message"},"Seu carrinho est\xe1 vazio");return a.length?c.map((function(e,a){return r.a.createElement(S,{product:e,key:a,handleDelete:t.handleDelete,increaseQuantity:n,decreaseQuantity:i})})):o}}]),a}(r.a.Component),q=function(t){Object(d.a)(a,t);var e=Object(p.a)(a);function a(){return Object(u.a)(this,a),e.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){var t=this.props.addState,e=this.props.location.state.product;return r.a.createElement("div",{key:e.title},r.a.createElement("p",{"data-testid":"product-detail-name"},e.title),r.a.createElement("img",{src:e.thumbnail,alt:e.title}),r.a.createElement("p",null,e.price),r.a.createElement("button",{type:"button",onClick:function(){return t(e)},"data-testid":"product-detail-add-to-cart"},"Adicionar ao carrinho"),r.a.createElement(h.b,{to:"/carrinho","data-testid":"shopping-cart-button"},"Carrinho de compras"))}}]),a}(r.a.Component),x=function(t){Object(d.a)(a,t);var e=Object(p.a)(a);function a(){var t;return Object(u.a)(this,a),(t=e.call(this)).state={cart:[]},t.addState=t.addState.bind(Object(l.a)(t)),t.increaseQuantity=t.increaseQuantity.bind(Object(l.a)(t)),t.decreaseQuantity=t.decreaseQuantity.bind(Object(l.a)(t)),t}return Object(s.a)(a,[{key:"addState",value:function(t){var e=[],a=this.state.cart,n=a.find((function(e){return e.id===t.id}));n?e=a.map((function(t){return t.id===n.id?(t.quantity+=1,t):t})):(t.quantity=1,e=[].concat(Object(o.a)(a),[t])),this.setState((function(){return{cart:e}}))}},{key:"increaseQuantity",value:function(t){var e=this.state.cart.map((function(e){return e.id===t.id?(e.quantity+=1,e):e}));this.setState({cart:e})}},{key:"decreaseQuantity",value:function(t){var e=this.state.cart.map((function(e){return e.id===t.id&&e.quantity>0?(e.quantity-=1,e):e}));this.setState({cart:e})}},{key:"render",value:function(){var t=this,e=this.state.cart;return r.a.createElement("div",null,r.a.createElement(h.a,{basename:"/app-toot-name"},r.a.createElement(m.c,null,r.a.createElement(m.a,{exact:!0,path:"/",render:function(){return r.a.createElement(C,{addState:t.addState})}}),r.a.createElement(m.a,{exact:!0,path:"/carrinho",render:function(){return r.a.createElement(Q,{cart:e,decreaseQuantity:t.decreaseQuantity,increaseQuantity:t.increaseQuantity})}}),r.a.createElement(m.a,{exact:!0,path:"/details/:id",render:function(e){return r.a.createElement(q,Object.assign({},e,{addState:t.addState}))}}))))}}]),a}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(x,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}},[[24,1,2]]]);
//# sourceMappingURL=main.a2e434ca.chunk.js.map